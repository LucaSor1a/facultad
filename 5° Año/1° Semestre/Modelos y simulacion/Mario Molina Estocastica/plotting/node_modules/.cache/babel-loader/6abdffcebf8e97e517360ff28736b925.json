{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar d3_selection_1 = require(\"d3-selection\");\n\nvar d3_color_1 = require(\"d3-color\");\n\nvar utils_1 = __importDefault(require(\"../utils\"));\n\nvar evaluate_1 = __importDefault(require(\"../evaluate\"));\n\nfunction scatter(chart) {\n  var xScale = chart.meta.xScale;\n  var yScale = chart.meta.yScale;\n\n  function scatter(selection) {\n    selection.each(function (d) {\n      var i, j;\n      var index = d.index;\n      var color = utils_1.default.color(d, index);\n      var evaluatedData = evaluate_1.default(chart, d); // scatter doesn't need groups, therefore each group is\n      // flattened into a single array\n\n      var joined = [];\n\n      for (i = 0; i < evaluatedData.length; i += 1) {\n        for (j = 0; j < evaluatedData[i].length; j += 1) {\n          joined.push(evaluatedData[i][j]);\n        }\n      }\n\n      var innerSelection = d3_selection_1.select(this).selectAll(':scope > circle').data(joined);\n      var innerSelectionEnter = innerSelection.enter().append('circle');\n      var selection = innerSelection.merge(innerSelectionEnter).attr('fill', d3_color_1.hsl(color.toString()).brighter(1.5).hex()).attr('stroke', color).attr('opacity', 0.7).attr('r', 1).attr('cx', function (d) {\n        return xScale(d[0]);\n      }).attr('cy', function (d) {\n        return yScale(d[1]);\n      });\n\n      if (d.attr) {\n        for (var k in d.attr) {\n          if (d.attr.hasOwnProperty(k)) {\n            selection.attr(k, d.attr[k]);\n          }\n        }\n      }\n\n      innerSelection.exit().remove();\n    });\n  }\n\n  return scatter;\n}\n\nexports.default = scatter;","map":{"version":3,"mappings":";;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AAKA,SAAwBA,OAAxB,CAAiCC,KAAjC,EAA6C;AAC3C,MAAMC,MAAM,GAAGD,KAAK,CAACE,IAAN,CAAWD,MAA1B;AACA,MAAME,MAAM,GAAGH,KAAK,CAACE,IAAN,CAAWC,MAA1B;;AAEA,WAASJ,OAAT,CAAkBK,SAAlB,EAAwE;AACtEA,aAAS,CAACC,IAAV,CAAe,UAAUC,CAAV,EAAW;AACxB,UAAIC,CAAJ,EAAOC,CAAP;AACA,UAAMC,KAAK,GAAGH,CAAC,CAACG,KAAhB;AACA,UAAMC,KAAK,GAAGC,gBAAMD,KAAN,CAAYJ,CAAZ,EAAeG,KAAf,CAAd;AACA,UAAMG,aAAa,GAAGC,mBAASb,KAAT,EAAgBM,CAAhB,CAAtB,CAJwB,CAMxB;AACA;;AACA,UAAMQ,MAAM,GAAG,EAAf;;AACA,WAAKP,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGK,aAAa,CAACG,MAA9B,EAAsCR,CAAC,IAAI,CAA3C,EAA8C;AAC5C,aAAKC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGI,aAAa,CAACL,CAAD,CAAb,CAAiBQ,MAAjC,EAAyCP,CAAC,IAAI,CAA9C,EAAiD;AAC/CM,gBAAM,CAACE,IAAP,CAAYJ,aAAa,CAACL,CAAD,CAAb,CAAiBC,CAAjB,CAAZ;AACD;AACF;;AAED,UAAMS,cAAc,GAAGC,sBAAS,IAAT,EACpBC,SADoB,CACV,iBADU,EAEpBC,IAFoB,CAEfN,MAFe,CAAvB;AAIA,UAAMO,mBAAmB,GAAGJ,cAAc,CAACK,KAAf,GACzBC,MADyB,CAClB,QADkB,CAA5B;AAGA,UAAMnB,SAAS,GAAGa,cAAc,CAACO,KAAf,CAAqBH,mBAArB,EACfI,IADe,CACV,MADU,EACFC,eAAMhB,KAAK,CAACiB,QAAN,EAAN,EAAwBC,QAAxB,CAAiC,GAAjC,EAAsCC,GAAtC,EADE,EAEfJ,IAFe,CAEV,QAFU,EAEAf,KAFA,EAGfe,IAHe,CAGV,SAHU,EAGC,GAHD,EAIfA,IAJe,CAIV,GAJU,EAIL,CAJK,EAKfA,IALe,CAKV,IALU,EAKJ,UAAUnB,CAAV,EAAW;AAAI,eAAOL,MAAM,CAACK,CAAC,CAAC,CAAD,CAAF,CAAb;AAAqB,OALhC,EAMfmB,IANe,CAMV,IANU,EAMJ,UAAUnB,CAAV,EAAW;AAAI,eAAOH,MAAM,CAACG,CAAC,CAAC,CAAD,CAAF,CAAb;AAAqB,OANhC,CAAlB;;AAQA,UAAIA,CAAC,CAACmB,IAAN,EAAY;AACV,aAAK,IAAIK,CAAT,IAAcxB,CAAC,CAACmB,IAAhB,EAAsB;AACpB,cAAGnB,CAAC,CAACmB,IAAF,CAAOM,cAAP,CAAsBD,CAAtB,CAAH,EAA6B;AAC3B1B,qBAAS,CAACqB,IAAV,CAAeK,CAAf,EAAkBxB,CAAC,CAACmB,IAAF,CAAOK,CAAP,CAAlB;AACD;AACF;AACF;;AAEDb,oBAAc,CAACe,IAAf,GAAsBC,MAAtB;AACD,KAvCD;AAwCD;;AAED,SAAOlC,OAAP;AACD;;AAhDDmC","names":["scatter","chart","xScale","meta","yScale","selection","each","d","i","j","index","color","utils_1","evaluatedData","evaluate_1","joined","length","push","innerSelection","d3_selection_1","selectAll","data","innerSelectionEnter","enter","append","merge","attr","d3_color_1","toString","brighter","hex","k","hasOwnProperty","exit","remove","exports"],"sourceRoot":"","sources":["../../src/graph-types/scatter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}